<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
  <div class="card m-3">
    <h5 class="card-header text-center">Firma Bilgileri</h5>
    <div class="card-body text-center">
      <mat-form-field>
        <mat-label>Geçici Beyanname No</mat-label>
        <input matInput readonly #BeyannameNo [(ngModel)]="beyanInternalNo" />
      </mat-form-field>
      <button
        mat-icon-button
        [matMenuTriggerFor]="beyannameheaderMenu"
        class="header-dropdown-mat-icon-button"
      >
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #beyannameheaderMenu="matMenu">
        <button
          mat-menu-item
          (click)="islemFirma()"
          [disabled]="
            beyanStatu === 'Olusturuldu' || beyanStatu === 'Güncellendi'
              ? false
              : true
          "
        >
          <mat-icon>sync</mat-icon>
          <span>Firma İşlemleri</span>
        </button>
      </mat-menu>
      <mat-cell [style.flex]="'0 0 250px'" *matCellDef="let element">
      </mat-cell>
      <mat-label>{{ beyanStatu }}</mat-label>
      <form [formGroup]="firmaForm">
        <mat-card class="mat-card">
          <div class="example-box">
            <div class="container">
              <div
                fxLayout="row"
                fxLayout.xs="column"
                fxLayoutWrap
                fxLayoutGap="3.5%"
                fxLayoutAlign="left"
              >
                <mat-card formArrayName="firmaArry"
                  ><mat-card-title>Firma Listesi</mat-card-title
                  ><mat-divider></mat-divider>

                  <div
                    *ngFor="
                      let unit of firmaBilgileri.controls;
                      let i = index
                    "
                  >
                    <div [formGroupName]="i">
                      <div
                        fxLayout="row"
                        fxLayout.xs="column"
                        fxLayoutWrap
                        fxLayoutGap="3.5%"
                        fxLayoutAlign="center"
                      >
                       <mat-form-field fxFlex="10%">
                            <select
                              matNativeControl
                              placeholder="Ülke Kodu"
                              formControlName="ulkeKodu"
                              
                            >
                              <option
                                *ngFor="let s of _ulkeList"
                                [value]="s.kod"
                                >{{ s.kod }}</option
                              >
                            </select>
                       </mat-form-field> 
                       <mat-form-field fxFlex="10%">
                        <select
                          matNativeControl
                          placeholder="Tip"
                          formControlName="tip"
                          
                        >
                          <option
                            *ngFor="let s of _firmaTipiList"
                            [value]="s.kod"
                            >{{ s.kod }}</option
                          >
                        </select>
                        </mat-form-field> 
                        <mat-form-field fxFlex="10%">
                          <select
                            matNativeControl
                            placeholder="Kimlik Türü"
                            formControlName="kimlikTuru"
                            
                          >
                            <option
                              *ngFor="let s of _kimlikTuruList"
                              [value]="s.kod"
                              >{{ s.kod }}</option
                            >
                          </select>
                       </mat-form-field> 
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="No"
                            formControlName="no"
                          />
                        </mat-form-field>

                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="Ad Soyad/ Firma Ünvanı"
                            formControlName="adUnvan"
                          />
                        </mat-form-field>
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="Cadde Sokak No"
                            formControlName="caddeSokakNo"
                          />
                        </mat-form-field>
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="İl/İlçe"
                            formControlName="ilIlce"
                          />
                        </mat-form-field>
                      
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="Telefon No"
                            formControlName="telefon"
                          />
                        </mat-form-field>
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="Faks No"
                            formControlName="faks"
                          />
                        </mat-form-field>
                        <mat-form-field fxFlex="30%">
                          <input
                            matNativeControl
                            type="text"
                            placeholder="Posta Kodu"
                            formControlName="postaKodu"
                          />
                        </mat-form-field>
                        <button
                          mat-mini-fab
                          color="warn"
                          [disabled]="firmaBilgileri.disabled"
                          (click)="deleteFirmaField(i)"
                        >
                          <mat-icon>delete forever</mat-icon>
                        </button>
                      </div>
                    </div>
                    <mat-list-item  *ngIf="firmaBilgileri.controls.length > 0 ">
                      <p mat-line > {{i+1}} </p>
                     <mat-divider [inset]="true" *ngIf="firmaBilgileri.controls.length !=i+1" ></mat-divider>
                  </mat-list-item>
                  </div>

                  <mat-divider></mat-divider
                  ><mat-card-actions
                    ><button    [disabled]="firmaForm.disabled" mat-raised-button (click)="addFirmaField()">
                      <mat-icon>add box</mat-icon>
                      Firma Ekle
                    </button></mat-card-actions
                  ></mat-card
                >
                <div></div>
              </div>
            </div>
          </div>
        </mat-card>
        <div class="text-right">
          <button
          [disabled]="!firmaBilgileri.valid"
            class="btn btn-primary mr-1"
            (click)="onFirmaFormSubmit()"
          >
            Kaydet
          </button>
         
        </div>
      </form>
    </div>
  </div>
</div>
